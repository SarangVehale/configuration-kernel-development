# Setting up `git send-email` with Thunderbird Email Account

This is a complete, all in one guide to help you set up and use `git send-email` with an email account configured in Thunderbird (e.g., Gmail, outlook, or custom domains). This document assumes a fresh system with Git and email client installed.

Configuring `git-email` to send patches is easy using the `sendemail` configuration option, once you have your smtp server configuration. There is a wealth of online resources for obtaining information on [configuring git sendemail to send patches](https://git-send-email.io/). You can see an example of Gmail below.
```bash
[sendemail]
	smtpserver = smtp.gmail.com
	smtpserverport = 587
	smtpencryption = tls
	smtpuser = <username>
	smtppass = <password>

Once you place the above configuration in your `.gitconfig` file, running `git send-email mypatch.patch` is all you have to do to send patches; `mypatch.patch is generated by `git format-patch` command.

---

## 1. Introduction : 

### What is `git send-email`?
`git send-email` is a Git tool that allows you to send patches via email, which is common in many open source workflows. Instead of attaching patches manually, Git can directly email patches using an SMTP server. 

### Why use Thunderbird??
Thunderbird is a GUI based email client. While `git send-email` does not talk directly to Thunderbird, you can use the <b>same email account's SMTP settings</b> that Thunderbird uses.

## 2. Prerequisites : 

- A working email account (Gmail, Outlook, Yahoo, company email, etc.)
- SMTP server information (available via Thunderbird)
- Git installed on your system 

<b> Install Git and git-email :</b>
- Debian/ Ubuntu : 
	```bash 
	sudo apt update 
	sudo apt install git git-email
	```

- Fedora : 
	```bash
	sudo dnf install git git-email
	```

- macOS (Homebrew) : 
	```bash
	brew install git
	```

- Verify :
	```bash
	git --version
	git send-email --version
	```

## 3. Configure git user info

	```bash 
	git config --global user.name "Your name"
	git config --global user.email "your.email@example.com"
	```

## 4. Configure Thunderbird Email Account

<b> Step by step Thunderbird configuration for Gmail (similarly can do for Outlook, etc.)</b>

1. Open Thunderbird
2. Click on Applications Menu (☰) > Account settings.
3. At the bottom left, click Account settings > Add Mail Account...
4. Enter your name, email address, and your App password (see below).
5. Click <b>Continue</b>. Thunderbird will try to automatcally detect settings. 
6. Choose IMAP (recommended) and click Done.

After the account is added : 
1. Return to Account Settings
2. Under your account, check the following :
	- <b>Server Settings</b> (Incoming) : 
		- Server Type : `IMAP`
		- Server Name : `imap.gmail.com`
		- Port : `993`
		- Connection Security : `SSL/TLS`
		- Authentication Method : `Normal password`
		- Username : `your.email@gmail.com`
	- Under <b>Outgoing Server (SMTP)</b> : 
		- Hostname : `smtp.gmail.com`
		- Port : `465`
		- Connection security : `SSL/TLS`
		- Authentication method : `Normal password`
		- Username : `your.email@gmail.com`

<b> App password</b> (Gmail + MFA) 
1. Visit [Google Account Security Settings](https://myaccount.google.com/security).
2. Enable <b>2-Step verification</b> if not already enabled.
3. Click <b>App password</b>, create one for "Mail".
4. Use this password in Thunderbird and Git.(recommended : Create two seperate app passwords for `git-email` and `Email client`)

## 5. Configure Git to use SMTP 

```bash 
git config --global sendemail.smtpServer smtp.gmail.com

# SSL + Port 465
git config --global sendemail.smtpEncryption ssl
git config --global sendemail.smtpServerPort 465

git config --global sendemail.smtpUser your.email@gmail.com
git config --global sendemail.from your.email@gmail.com
```

<b>Saving the App Password</b>

Saving __app password__ might be required for `git-email` (or more accurately , for sending email through Git using `git send-email`) when you are using a secure email provide like Gmail, Outlook, or others that require stronger authenticatino methods.

1. Plaintext (not secure) 
	```bash
	echo 'your-app-password' | git config --global sendemail.smtppass
	```
	> ⚠️  This stores your app password in Git config as plaintext. Not recommended for shared systems.

2. Secure using `.netrc`

Create or edit the file `~/.netrc` : 
	```bash
	machine smtp.gmail.com
	login your.email@gmail.com	
	password your-app-password 
	```

Set proper permissions : 
	```bash
	chmod 600 ~/.netrc
	```

Tell Git to use it : 
	```bash
	git config --global sendemail.smtpencryption ssl 
	export GIT_SEND_EMAIL_NETRC=true
	```

To make it permanent, add to `~/.bashrc` or `~/.zshrc` : 
	```bash
	export GIT_SEND_EMAIL_NETRC=true
	```

## 6. Create and Send a patch

	```bash
	mkdir git-email-test && cd git-email-test
	git init 
	echo "Hello" > hello.txt
	git add hello.txt
	git commit -m "Add hello.txt"
	echo "World" >> hello.txt
	git commit -m "Append World"
	```

__Format patch__
	```bash
	git format-patch -1 HEAD
	```
	Creates `0001-Append-World.patch`

__Send Patch (dry run)__
	```bash
	git send-email --to="your.email@gmail.com" --dry-run 0001-*.patch
	```

__Send patch (real)__
	```bash
	git send-email --to="your.email@gmail.com" 0001-*.patch
	```
	Git will ask for your password unless saved via `.netrc` or plaintext

## 7. Optional configurations 

__Annotate each email before sending:__
	```bash
	git send-email --to="someone@example.com" --annotate 0001-*.patch
	```

__Confirm before each email:__
	```bash
	git send-email --to="someone@example.com" --confirm=always 0001-*.patch
	```

__Send multiple patches with a cover letter:__
	```bash
	git format-patch -2 --cover-letter
	git send-email --to="someone@example.com" *.patch
	```

## 8. Incoming Mail (Reference Only)

Git does not fetch incoming email — that’s handled by Thunderbird.

__Typical IMAP Settings:__

- Protocol: IMAP

- Hostname: imap.gmail.com

- Port: 993

- Connection Security: SSL/TLS

- Authentication Method: Normal password

- Username: your.email@gmail.com

Make sure IMAP is enabled in Gmail: Gmail IMAP Settings

## 9. Troubleshooting

__Authentication Failed__

- Use your App Password, not regular password.

__Unknown SMTP server__

- Check hostname/port.

__Test with: telnet smtp.gmail.com 465__

- Permission Denied
	```bash 
	git send-email --to="your.email@example.com" --smtp-debug=1 0001-*.patch
	```

